---
import { friends, type FriendInfo } from "../data/friends";
---

<style>
	.friends-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
		gap: var(--space-4);
		margin-top: var(--space-6);
	}

	.friend-card {
		display: flex;
		align-items: center;
		gap: var(--space-3);
		padding: var(--space-4);
		background: var(--color-bg-surface);
		border: 1px solid var(--color-border-soft);
		border-radius: var(--radius-md);
		text-decoration: none;
		transition: border-color var(--transition-base), box-shadow var(--transition-base);
	}

	.friend-card:hover {
		border-color: var(--color-border);
		box-shadow: var(--shadow-md);
	}

	.friend-card:focus-visible {
		outline: 2px solid var(--color-accent);
		outline-offset: 2px;
	}

	.friend-avatar {
		width: 64px;
		height: 64px;
		flex-shrink: 0;
		border-radius: 9999px;
		object-fit: cover;
		background: var(--color-bg-muted);
	}

	.friend-info {
		flex: 1;
		min-width: 0;
	}

	.friend-name {
		font-size: var(--font-size-base);
		font-weight: var(--font-weight-medium);
		color: var(--color-text-primary);
		margin: 0 0 var(--space-1) 0;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}

	.friend-description {
		font-size: var(--font-size-sm);
		color: var(--color-text-secondary);
		margin: 0;
		overflow: hidden;
		text-overflow: ellipsis;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
	}

	@media (min-width: 768px) {
		.friends-grid {
			grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
		}
	}
</style>

<div class="friends-grid">
	{friends.map((friend: FriendInfo) => (
		<a
			href={friend.url}
			target="_blank"
			rel="noopener noreferrer"
			class="friend-card"
			title={friend.description}
		>
			<img
				src={friend.avatar}
				alt={`${friend.name}'s avatar`}
				class="friend-avatar"
				width="64"
				height="64"
			/>
			<div class="friend-info">
				<h3 class="friend-name">{friend.name}</h3>
				<p class="friend-description">{friend.description}</p>
			</div>
		</a>
	))}
</div>
