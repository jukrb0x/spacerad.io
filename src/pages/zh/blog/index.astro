---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import PostList from '../../../components/PostList.astro';
import { getCollection } from 'astro:content';
import { t } from '../../../utils/i18n';

const posts = await getCollection('posts', ({ data }) => {
  return data.lang === 'zh' && !data.draft;
});
---

<BaseLayout title={t('blog.title', 'zh')} description={t('blog.description', 'zh')}>
  <div class="container py-8">
    <header class="mb-12">
      <h1 class="text-3xl md:text-4xl font-bold">{t('blog.title', 'zh')}</h1>
      <p class="text-secondary mt-2">{t('blog.description', 'zh')}</p>
    </header>

    {posts.length === 0 ? (
      <p class="text-secondary">暂无文章，敬请期待！</p>
    ) : (
      <PostList posts={posts} lang="zh" basePath="/zh/blog" />
    )}
  </div>
</BaseLayout>
