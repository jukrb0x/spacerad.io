---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostList from '../../components/PostList.astro';
import { getCollection } from 'astro:content';
import { t } from '../../utils/i18n';

const posts = await getCollection('posts', ({ data }) => {
  return data.lang === 'en' && !data.draft;
});
---

<BaseLayout title={t('blog.title', 'en')} description={t('blog.description', 'en')}>
  <div class="container py-8">
    <header class="mb-12">
      <h1 class="text-3xl md:text-4xl font-bold">{t('blog.title', 'en')}</h1>
      <p class="text-secondary mt-2">{t('blog.description', 'en')}</p>
    </header>

    {posts.length === 0 ? (
      <p class="text-secondary">No posts yet. Check back soon!</p>
    ) : (
      <PostList posts={posts} lang="en" basePath="/blog" />
    )}
  </div>
</BaseLayout>
