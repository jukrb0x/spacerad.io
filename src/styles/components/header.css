/* =============================================
 * Header Component - Space Radio Design System
 * ============================================= */

/**
 * Enhanced header with:
 * - Auto-hide on scroll down
 * - Show on scroll up
 * - Blur backdrop when scrolled
 * - Reading progress indicator
 * - Minimal mode (optional)
 * - Respects prefers-reduced-motion
 */

header[data-header] {
    /* Smooth transitions for all states */
    transition:
        transform 0.3s ease,
        backdrop-filter 0.3s ease,
        -webkit-backdrop-filter 0.3s ease,
        background-color 0.3s ease;

    /* Ensure header is above other content */
    z-index: var(--z-sticky);
}

/* Blur backdrop when scrolled - Modern Spaceship */
header[data-header].is-scrolled {
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    background: rgba(250, 251, 252, 0.85); /* Light mode with transparency - cool white */
}

/* Dark theme blur backdrop - Deep space */
:root[data-theme="dark"] header[data-header].is-scrolled {
    background: rgba(13, 17, 23, 0.85); /* Dark mode with transparency - deep space black */
}

/* Hidden state - slides up out of view */
header[data-header].header--hidden {
    transform: translateY(-100%);
}

/* Optional minimal mode - reduces header size when scrolling */
header[data-header].header--minimal {
    padding-block: 0.5rem;
}

header[data-header].header--minimal h2 {
    font-size: 0.9rem;
}

/* Reading progress bar */
[data-reading-progress] {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    transform-origin: left;
    transform: scaleX(0);
    transition: transform 0.1s ease-out;
    pointer-events: none;
}

/* Respect user preferences for reduced motion */
@media (prefers-reduced-motion: reduce) {
    header[data-header],
    header[data-header].header--hidden,
    [data-reading-progress] {
        transition: none;
        animation: none;
    }

    /* Still hide header but without animation */
    header[data-header].header--hidden {
        transform: translateY(-100%);
    }
}

/* Mobile-specific adjustments */
@media (max-width: 768px) {
    /* Slightly faster transition on mobile for better feel */
    header[data-header] {
        transition-duration: 0.25s;
    }

    /* Thinner progress bar on mobile */
    [data-reading-progress] {
        height: 2px;
    }
}

/* Safari-specific fixes for backdrop-filter */
@supports ((-webkit-backdrop-filter: blur(1px)) and (not (backdrop-filter: blur(1px)))) {
    header[data-header].is-scrolled {
        -webkit-backdrop-filter: blur(12px) saturate(180%);
    }
}

/* Fallback for browsers that don't support backdrop-filter */
@supports not (backdrop-filter: blur(1px)) {
    header[data-header].is-scrolled {
        background: var(--color-bg-surface); /* Solid background fallback */
    }

    :root[data-theme="dark"] header[data-header].is-scrolled {
        background: var(--color-bg-surface);
    }
}
