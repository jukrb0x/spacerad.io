// =============================================
// Space Radio Design System - Design Tokens
// =============================================

@use 'sass:map';

// ---------------------------------------------
// SCSS Variables (for use in SCSS files)
// ---------------------------------------------

// Typography Scale - Apple HIG compliant (17px base)
$font-sizes: (
  'xs': 0.8125rem,
  'sm': 0.9375rem,
  'base': 1.0625rem,
  'lg': 1.25rem,
  'xl': 1.5rem,
  '2xl': 1.875rem,
  '3xl': 2.25rem,
  '4xl': 3rem,
  '5xl': 3.75rem,
  '6xl': 4.5rem,
);

$line-heights: (
  'none': 1,
  'extra-tight': 1.1,
  'tight': 1.22,
  'relaxed': 1.65,
  'base': 1.75,
);

$font-weights: (
  'light': 300,
  'normal': 400,
  'medium': 500,
  'semibold': 600,
  'bold': 700,
  'extrabold': 800,
);

$letter-spacings: (
  'tighter': -0.02em,
  'tight': -0.01em,
  'normal': 0,
  'wide': 0.04em,
  'wider': 0.12em,
);

// Spacing Scale
$spaces: (
  '1': 0.25rem,
  '2': 0.5rem,
  '3': 0.75rem,
  '4': 1rem,
  '6': 1.5rem,
  '8': 2rem,
  '12': 3rem,
);

// Border Radius
$radii: (
  'sm': 6px,
  'md': 10px,
  'lg': 16px,
);

// Z-Index Scale
$z-indices: (
  'base': 0,
  'dropdown': 10,
  'sticky': 20,
  'fixed': 30,
  'modal-backdrop': 40,
  'modal': 50,
  'popover': 60,
  'tooltip': 70,
);

// Transition Timing
$transitions: (
  'fast': 0.15s ease,
  'base': 0.2s ease,
  'slow': 0.3s ease,
);

// Layout
$layout-max-width: 72rem;
$measure: 68ch;
$measure-wide: 72ch;

// Breakpoints
$breakpoints: (
  'sm': 640px,
  'md': 768px,
  'lg': 1024px,
  'xl': 1280px,
);

// ---------------------------------------------
// Helper Functions
// ---------------------------------------------

@function space($key) {
  @return map.get($spaces, $key);
}

@function font-size($key) {
  @return map.get($font-sizes, $key);
}

@function radius($key) {
  @return map.get($radii, $key);
}

@function z($key) {
  @return map.get($z-indices, $key);
}

@function transition($key) {
  @return map.get($transitions, $key);
}

// ---------------------------------------------
// Common Mixins
// ---------------------------------------------

// Responsive breakpoint mixin
@mixin breakpoint($point) {
  @if map.has-key($breakpoints, $point) {
    @media (min-width: map.get($breakpoints, $point)) {
      @content;
    }
  } @else {
    @media (min-width: $point) {
      @content;
    }
  }
}

@mixin breakpoint-down($point) {
  @if map.has-key($breakpoints, $point) {
    @media (max-width: map.get($breakpoints, $point) - 1px) {
      @content;
    }
  } @else {
    @media (max-width: $point) {
      @content;
    }
  }
}

// Dark theme mixin
@mixin dark-theme {
  :root[data-theme="dark"] & {
    @content;
  }
}

// At root dark theme (for :root level styles)
@mixin dark-theme-root {
  &[data-theme="dark"] {
    @content;
  }
}

// Transition mixin
@mixin transition($properties...) {
  $result: ();
  @each $prop in $properties {
    $result: append($result, $prop var(--transition-base), comma);
  }
  transition: $result;
}

// Focus visible styles
@mixin focus-visible($color: var(--color-accent-soft)) {
  &:focus-visible {
    outline: 2px solid $color;
    outline-offset: 2px;
  }
}

// Screen reader only
@mixin sr-only {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Truncate text
@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Line clamp
@mixin line-clamp($lines) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// Card surface styles
@mixin surface-card($shadow: true) {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-soft);
  border-radius: radius('lg');
  @if $shadow {
    box-shadow: var(--shadow-soft);
  }
}

// Hover underline link
@mixin hover-underline {
  text-decoration: underline;
  text-decoration-color: rgba(128, 128, 128, 0.3);
  text-underline-offset: 0.2em;
  transition: text-decoration-color 0.3s ease;

  &:hover {
    text-decoration-color: currentColor;
  }
}

// Reduced motion mixin
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    @content;
  }
}

// ---------------------------------------------
// CSS Custom Properties (output to :root)
// ---------------------------------------------

:root {
  // Color scheme
  color-scheme: light dark;

  // Typography
  @each $name, $size in $font-sizes {
    --font-size-#{$name}: #{$size};
  }

  @each $name, $height in $line-heights {
    --line-height-#{$name}: #{$height};
  }

  @each $name, $weight in $font-weights {
    --font-weight-#{$name}: #{$weight};
  }

  @each $name, $spacing in $letter-spacings {
    --letter-spacing-#{$name}: #{$spacing};
  }

  // Spacing
  @each $name, $space in $spaces {
    --space-#{$name}: #{$space};
  }

  // Radius
  @each $name, $radius in $radii {
    --radius-#{$name}: #{$radius};
  }

  // Z-index
  @each $name, $index in $z-indices {
    --z-#{$name}: #{$index};
  }

  // Transitions
  @each $name, $timing in $transitions {
    --transition-#{$name}: #{$timing};
  }

  // Layout
  --layout-max-width: #{$layout-max-width};
  --measure: #{$measure};
  --measure-wide: #{$measure-wide};

  // Overlay tokens - theme-invariant
  --color-overlay-dark-35: rgba(0, 0, 0, 0.35);
  --color-overlay-dark-40: rgba(0, 0, 0, 0.4);
  --color-overlay-dark-60: rgba(0, 0, 0, 0.6);
  --color-overlay-light-25: rgba(255, 255, 255, 0.25);
  --color-overlay-light-35: rgba(255, 255, 255, 0.35);
  --color-overlay-light-50: rgba(255, 255, 255, 0.5);
  --color-overlay-light-80: rgba(255, 255, 255, 0.8);
  --color-overlay-light-90: rgba(255, 255, 255, 0.9);
}

// ---------------------------------------------
// Light Theme (Default)
// ---------------------------------------------

:root {
  // Background palette
  --color-bg-page: #fafbfc;
  --color-bg-surface: #ffffff;
  --color-bg-muted: #f6f8fa;
  --color-bg-elevated: #ffffff;

  // Text colors - WCAG AA compliant
  --color-text-primary: #0d1117;
  --color-text-primary-rgb: 13 17 23;
  --color-text-secondary: #57606a;
  --color-text-muted: #8b949e;
  --color-text-inverse: #ffffff;

  // Border tokens
  --color-border: #d0d7de;
  --color-border-soft: rgba(var(--color-text-primary-rgb), 0.08);
  --color-border-subtle: rgba(var(--color-text-primary-rgb), 0.12);
  --color-border-strong: #afb8c1;

  // Accent colors
  --color-accent: #555555;
  --color-accent-dark: #333333;
  --color-accent-soft: #f0f0f0;
  --color-accent-rgb: 85 85 85;
  --color-accent-tint: rgba(var(--color-accent-rgb), 0.16);
  --color-accent-tint-6: color-mix(in srgb, var(--color-accent) 6%, transparent);
  --color-accent-tint-8: color-mix(in srgb, var(--color-accent) 8%, transparent);
  --color-accent-tint-12: color-mix(in srgb, var(--color-accent) 12%, transparent);
  --color-accent-tint-18: color-mix(in srgb, var(--color-accent) 18%, transparent);

  // Link colors
  --color-link: #555555;
  --color-link-hover: #222222;

  // State colors
  --color-state-success-bg: #dafbe1;
  --color-state-success-text: #1a7f37;
  --color-state-info-bg: #ddf4ff;
  --color-state-info-text: #0969da;
  --color-success: #1a7f37;
  --color-warning: #bf8700;
  --color-danger: #cf222e;
  --color-note: #8250df;

  // Shadows
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.06);
  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
  --shadow-soft: 0 6px 18px rgba(47, 37, 25, 0.08);
  --shadow-strong: 0 16px 36px rgba(47, 37, 25, 0.14);
  --shadow-xl: 0 24px 48px rgba(0, 0, 0, 0.18);
  --shadow-2xl: 0 32px 64px rgba(0, 0, 0, 0.22);

  // Lightbox & overlay
  --color-backdrop: rgba(0, 0, 0, 0.65);
  --shadow-lightbox: 0 20px 60px rgba(0, 0, 0, 0.4);
  --shadow-button-hover: 0 6px 20px rgba(85, 85, 85, 0.15);

  // Code
  --color-code-bg: #f6f8fa;

  // Additional palette
  --color-accent-warm: #888888;
  --color-accent-cool: #555555;

  // Space Radio color palettes
  --color-radio-dial: #d4a574;
  --color-radio-tube: #ff9f43;
  --color-radio-grill: #2c3e50;
  --color-space-cyan: #00d9ff;
  --color-space-purple: #a855f7;
  --color-space-blue: #3b82f6;
  --color-space-silver: #6e7781;

  // Glow effects
  --glow-accent-soft: 0 0 20px rgba(85, 85, 85, 0.15);
  --glow-accent-strong: 0 0 40px rgba(85, 85, 85, 0.25);
  --glow-cool: 0 0 30px rgba(59, 130, 246, 0.2);

  // Gradients
  --gradient-warm-to-cool: linear-gradient(135deg, #666666 0%, #999999 100%);
  --gradient-bg-subtle: radial-gradient(ellipse at top, rgba(85, 85, 85, 0.02) 0%, transparent 50%);
  --gradient-cosmic: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --gradient-radio-glow: radial-gradient(ellipse at center, rgba(212, 165, 116, 0.15) 0%, transparent 70%);
  --gradient-bg-cosmic: radial-gradient(ellipse at top, rgba(102, 126, 234, 0.05) 0%, transparent 50%);
  --gradient-bg-radio: radial-gradient(ellipse at bottom, rgba(212, 165, 116, 0.05) 0%, transparent 50%);
}

// ---------------------------------------------
// Dark Theme
// ---------------------------------------------

:root[data-theme="dark"] {
  color-scheme: dark;

  // Background palette
  --color-bg-page: #0d1117;
  --color-bg-surface: #161b22;
  --color-bg-muted: #21262d;
  --color-bg-elevated: #1c2128;

  // Text colors
  --color-text-primary: #e6edf3;
  --color-text-primary-rgb: 230 237 243;
  --color-text-secondary: #8b949e;
  --color-text-muted: #6e7781;
  --color-text-inverse: #0d1117;

  // Border tokens
  --color-border: #30363d;
  --color-border-soft: rgba(var(--color-text-primary-rgb), 0.08);
  --color-border-subtle: rgba(var(--color-text-primary-rgb), 0.16);
  --color-border-strong: #484f58;

  // Accent colors
  --color-accent: #a0a0a0;
  --color-accent-dark: #888888;
  --color-accent-soft: rgba(160, 160, 160, 0.16);
  --color-accent-rgb: 160 160 160;
  --color-accent-tint: rgba(var(--color-accent-rgb), 0.22);
  --color-accent-tint-6: color-mix(in srgb, var(--color-accent) 6%, transparent);
  --color-accent-tint-8: color-mix(in srgb, var(--color-accent) 8%, transparent);
  --color-accent-tint-12: color-mix(in srgb, var(--color-accent) 12%, transparent);
  --color-accent-tint-18: color-mix(in srgb, var(--color-accent) 18%, transparent);

  // Link colors
  --color-link: #a0a0a0;
  --color-link-hover: #d0d0d0;

  // State colors
  --color-state-success-bg: rgba(46, 160, 67, 0.16);
  --color-state-success-text: #3fb950;
  --color-state-info-bg: rgba(88, 166, 255, 0.16);
  --color-state-info-text: #58a6ff;
  --color-success: #3fb950;
  --color-warning: #d29922;
  --color-danger: #f85149;
  --color-note: #a371f7;

  // Shadows - stronger for dark mode
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.35);
  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
  --shadow-soft: 0 10px 28px rgba(0, 0, 0, 0.32);
  --shadow-strong: 0 24px 42px rgba(0, 0, 0, 0.44);
  --shadow-xl: 0 24px 48px rgba(0, 0, 0, 0.5);
  --shadow-2xl: 0 32px 64px rgba(0, 0, 0, 0.6);

  // Lightbox & overlay
  --color-backdrop: rgba(0, 0, 0, 0.85);
  --shadow-lightbox: 0 20px 60px rgba(0, 0, 0, 0.6);
  --shadow-button-hover: 0 6px 20px rgba(160, 160, 160, 0.2);

  // Code
  --color-code-bg: #161b22;

  // Additional palette
  --color-accent-warm: #b0b0b0;
  --color-accent-cool: #a0a0a0;

  // Space Radio color palettes - adjusted for dark mode
  --color-radio-dial: #e8c9a0;
  --color-radio-tube: #ffb366;
  --color-radio-grill: #4a6785;
  --color-space-cyan: #22e5ff;
  --color-space-purple: #c084fc;
  --color-space-blue: #60a5fa;
  --color-space-silver: #8b949e;

  // Glow effects - brighter for dark mode
  --glow-accent-soft: 0 0 20px rgba(160, 160, 160, 0.2);
  --glow-accent-strong: 0 0 40px rgba(160, 160, 160, 0.35);
  --glow-cool: 0 0 30px rgba(96, 165, 250, 0.3);

  // Gradients
  --gradient-warm-to-cool: linear-gradient(135deg, #a0a0a0 0%, #c0c0c0 100%);
  --gradient-bg-subtle: radial-gradient(ellipse at top, rgba(160, 160, 160, 0.03) 0%, transparent 50%);
  --gradient-cosmic: linear-gradient(135deg, #818cf8 0%, #a78bfa 100%);
  --gradient-radio-glow: radial-gradient(ellipse at center, rgba(232, 201, 160, 0.1) 0%, transparent 70%);
  --gradient-bg-cosmic: radial-gradient(ellipse at top, rgba(129, 140, 248, 0.08) 0%, transparent 50%);
  --gradient-bg-radio: radial-gradient(ellipse at bottom, rgba(232, 201, 160, 0.06) 0%, transparent 50%);
}
